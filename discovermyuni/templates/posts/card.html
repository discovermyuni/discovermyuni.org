{% load static %}
<article class="card-surface p-6 transition-all duration-200 hover:shadow-lg border-l-4 border-l-transparent hover:border-l-brand-500">
  <div class="flex gap-4">
    <!-- Vote Column -->
    <div class="flex flex-col items-center w-12 flex-shrink-0 select-none">
      <button class="vote-btn up group" data-action="up" data-post-id="{{ post.pk }}" title="Upvote" disabled>
        <svg class="w-4 h-4 text-slate-400 group-hover:text-brand-600 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
        </svg>
      </button>
      <div class="vote-score text-sm font-semibold py-1 text-slate-600 dark:text-slate-400" data-score>--</div>
      <button class="vote-btn down group" data-action="down" data-post-id="{{ post.pk }}" title="Downvote" disabled>
        <svg class="w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
        </svg>
      </button>
    </div>

    <!-- Post Content -->
    <div class="flex-1 min-w-0">
      <!-- Post Header -->
      <div class="flex items-start gap-3 mb-3">
        <div class="flex-shrink-0">
          <img src="https://ui-avatars.com/api/?name={{ post.organization.name|urlencode }}&size=40&background=random" 
               alt="{{ post.organization.name }}" 
               class="w-10 h-10 rounded-full border-2 border-slate-200 dark:border-slate-700">
        </div>
        <div class="flex-1 min-w-0">
          <div class="flex items-center gap-2 mb-1">
            <a href="{% url 'discovery:organization_posts' post.organization.slug %}" 
               class="font-semibold text-slate-900 dark:text-slate-100 hover:text-brand-600 dark:hover:text-brand-400 transition-colors truncate">
              {{ post.organization.name }}
            </a>
            <span class="text-slate-400">â€¢</span>
            <time class="text-sm text-slate-500 dark:text-slate-400 whitespace-nowrap" 
                  datetime="{{ post.created_at|date:'c' }}">
              {{ post.created_at|timesince }} ago
            </time>
          </div>
          {% if post.event_date %}
            <div class="flex items-center gap-1.5 text-xs text-amber-600 dark:text-amber-400 mb-2">
              <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
              <span>{{ post.event_date|date:"M j, Y g:i A" }}</span>
            </div>
          {% endif %}
        </div>
      </div>

      <!-- Post Title -->
      <h3 class=\"text-lg font-semibold mb-3 line-clamp-2 leading-tight text-slate-900 dark:text-slate-100\">
        {{ post.title }}
      </h3>

      <!-- Post Image -->
      {% if post.image %}
        <div class="mb-4 rounded-lg overflow-hidden bg-slate-100 dark:bg-slate-800">
          <img src="{{ post.image.url }}" 
               class="w-full h-auto max-h-80 object-cover" 
               alt="{{ post.title }}" 
               loading="lazy">
        </div>
      {% endif %}

      <!-- Post Description -->
      <div class="text-sm leading-relaxed line-clamp-3 text-slate-600 dark:text-slate-300 mb-4">
        {{ post.description }}
      </div>

      <!-- Tags -->
      {% if post.tags.all %}
        <div class="flex flex-wrap gap-2 mb-4">
          {% for tag in post.tags.all|slice:":4" %}
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-brand-100 text-brand-800 dark:bg-brand-900/20 dark:text-brand-300">
              {{ tag.name }}
            </span>
          {% endfor %}
          {% if post.tags.all|length > 4 %}
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">
              +{{ post.tags.all|length|add:"-4" }} more
            </span>
          {% endif %}
        </div>
      {% endif %}

      <!-- Post Actions -->
      <div class="flex items-center gap-3 text-sm">
        <a href="{% url 'posts:detail' post.pk %}" 
           class="inline-flex items-center gap-2 px-3 py-1.5 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
          </svg>
          View Details
        </a>
        <button class="inline-flex items-center gap-2 px-3 py-1.5 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors" 
                disabled title="Comments coming soon">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
          </svg>
          <span class="text-xs opacity-75">Soon</span>
        </button>
        <button class="inline-flex items-center gap-2 px-3 py-1.5 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors" 
                disabled title="Share feature coming soon">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
          </svg>
          <span class="text-xs opacity-75">Soon</span>
        </button>
      </div>
    </div>
  </div>
</article>
